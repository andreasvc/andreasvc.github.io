<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>File formats &mdash; Disco-DOP 0.5pre1 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.5pre1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Disco-DOP 0.5pre1 documentation" href="index.html" />
    <link rel="up" title="Reference" href="ref.html" />
    <link rel="next" title="API documentation" href="api.html" />
    <link rel="prev" title="Parser parameters" href="params.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="api.html" title="API documentation"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="params.html" title="Parser parameters"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Disco-DOP 0.5pre1 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="ref.html" accesskey="U">Reference</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="file-formats">
<span id="fileformats"></span><h1>File formats<a class="headerlink" href="#file-formats" title="Permalink to this headline">¶</a></h1>
<div class="section" id="corpora">
<h2>Corpora<a class="headerlink" href="#corpora" title="Permalink to this headline">¶</a></h2>
<div class="section" id="export">
<h3>export<a class="headerlink" href="#export" title="Permalink to this headline">¶</a></h3>
<p>Negra export format (v3).</p>
<p>For example:</p>
<div class="highlight-python"><div class="highlight"><pre>#BOS 0
is  VB  --  --  500
John    NP  --  --  0
rich    JJ  --  --  500
?   ?   --  --  0
#500    VP  --  --  0
#EOS 0
</pre></div>
</div>
<p>An optional lemma field is supported. Secondary edges are ignored.
The preamble listing the tag sets is ignored and not reproduced
when trees are written in this format.</p>
<p>This format is supported when input is read incrementally from
standard input with the <code class="docutils literal"><span class="pre">treedraw</span></code> and <code class="docutils literal"><span class="pre">treetransforms</span></code> commands.</p>
<p>Cf. <a class="reference external" href="http://www.coli.uni-saarland.de/projects/sfb378/negra-corpus/exformat3.ps">http://www.coli.uni-saarland.de/projects/sfb378/negra-corpus/exformat3.ps</a></p>
</div>
<div class="section" id="bracket">
<h3>bracket<a class="headerlink" href="#bracket" title="Permalink to this headline">¶</a></h3>
<p>Penn treebank style bracketed trees, one tree per line.</p>
<p>For example:</p>
<div class="highlight-python"><div class="highlight"><pre>(S (NP John) (VP (VB is) (JJ rich)) (. .))
</pre></div>
</div>
<p>This format is supported when input is read incrementally from
standard input with the <code class="docutils literal"><span class="pre">treedraw</span></code> and <code class="docutils literal"><span class="pre">treetransforms</span></code> commands.</p>
</div>
<div class="section" id="discbracket">
<h3>discbracket<a class="headerlink" href="#discbracket" title="Permalink to this headline">¶</a></h3>
<p>A corpus format for discontinuous trees in bracket notation, where the
leaves are indices pointing to words in a separately specified sentence.</p>
<p>For example:</p>
<div class="highlight-python"><div class="highlight"><pre>(S (NP 1) (VP (VB 0) (JJ 2)) (? 3)) is John rich ?
</pre></div>
</div>
<p>Note that the tree and the sentence are separated by a tab, while the words
in the sentence are separated by spaces. There is one tree and sentence
per line. Compared to Negra&#8217;s export format, this format lacks morphology,
lemmas and functional edges. On the other hand, it is very close to the
internal representation employed here, so it can be read efficiently.</p>
<p>This format is supported when input is read incrementally from
standard input with the <code class="docutils literal"><span class="pre">treedraw</span></code> and <code class="docutils literal"><span class="pre">treetransforms</span></code> commands.</p>
</div>
<div class="section" id="alpino">
<h3>alpino<a class="headerlink" href="#alpino" title="Permalink to this headline">¶</a></h3>
<p>Alpino XML format. One file per sentence. The hierarchical tree structure is
mirrored in the XML structure, which makes it possible to query trees in this
format with XPath (as opposed to TigerXML which maintains the tabular structure
of the Negra export format).</p>
<p>Cf. <a class="reference external" href="http://www.let.rug.nl/~vannoord/Lassy/alpino_ds.dtd">http://www.let.rug.nl/~vannoord/Lassy/alpino_ds.dtd</a></p>
</div>
<div class="section" id="dact">
<h3>dact<a class="headerlink" href="#dact" title="Permalink to this headline">¶</a></h3>
<p>Alpino XML trees in an XML database as used by Dact.
Cf. <a class="reference external" href="http://rug-compling.github.io/dact/">http://rug-compling.github.io/dact/</a></p>
</div>
<div class="section" id="read-only-formats">
<h3>Read-only formats<a class="headerlink" href="#read-only-formats" title="Permalink to this headline">¶</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name"><code class="docutils literal"><span class="pre">tiger</span></code>:</th><td class="field-body">Tiger XML format.
Cf. <a class="reference external" href="http://www.ims.uni-stuttgart.de/forschung/ressourcen/werkzeuge/TIGERSearch/doc/html/TigerXML.html">http://www.ims.uni-stuttgart.de/forschung/ressourcen/werkzeuge/TIGERSearch/doc/html/TigerXML.html</a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="write-only-formats">
<h3>write-only formats<a class="headerlink" href="#write-only-formats" title="Permalink to this headline">¶</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name"><code class="docutils literal"><span class="pre">connl</span></code>, <code class="docutils literal"><span class="pre">mst</span></code>:</th><td class="field-body">unlabeled dependencies; relies on head identfication.</td>
</tr>
<tr class="field-even field"><th class="field-name"><code class="docutils literal"><span class="pre">tokens</span></code>:</th><td class="field-body">one sentence per line, tokens separated by spaces.</td>
</tr>
<tr class="field-odd field"><th class="field-name"><code class="docutils literal"><span class="pre">wordpos</span></code>:</th><td class="field-body">similar to <code class="docutils literal"><span class="pre">tokens</span></code> but of the form <code class="docutils literal"><span class="pre">token/POS</span></code>.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="grammars">
<h2>Grammars<a class="headerlink" href="#grammars" title="Permalink to this headline">¶</a></h2>
<div class="section" id="pcfg">
<h3>PCFG<a class="headerlink" href="#pcfg" title="Permalink to this headline">¶</a></h3>
<p>PCFG grammars are stored in bitpar format. From the bitpar manual:</p>
<blockquote>
<div><p>The grammar file contains one grammar rule per  line.  Each  grammar rule
starts with its frequency [...] followed by the parent category (symbol on
the left-hand side) and the child categories (symbols  on  the  right-hand
side). The symbols are separated by whitespace. [...]</p>
<p>The lexicon file contains one lexicon entry per line. Each  lexicon  entry
starts  with  the  word [...] followed a sequence of part-of-speech
tag + frequency pairs. The POS tag is preceded by a tab character
and followed by a blank or tab character.</p>
</div></blockquote>
<p>Cf. <a class="reference external" href="http://www.cis.uni-muenchen.de/~schmid/tools/BitPar/">http://www.cis.uni-muenchen.de/~schmid/tools/BitPar/</a></p>
</div>
<div class="section" id="plcfrs">
<h3>PLCFRS<a class="headerlink" href="#plcfrs" title="Permalink to this headline">¶</a></h3>
<p>The PLCFRS format is as follows. Rules are delimited by newlines.
Fields are separated by tabs. The fields are:</p>
<div class="highlight-python"><div class="highlight"><pre>LHS RHS1    [RHS2]  yield-function  weight
</pre></div>
</div>
<p>The yield function defines how the spans of the RHS nonterminals
are combined to form the spans of the LHS nonterminal. Components of the yield
function are comma-separated, 0 refers to a component of the first RHS
nonterminal, and 1 from the second. Weights are expressed as rational
fractions.
The lexicon is defined in a separate file. Lines start with a single word,
followed by pairs of possible tags and their probabilities:</p>
<div class="highlight-python"><div class="highlight"><pre>WORD    TAG1    PROB1   [TAG2   PROB2 ...]
</pre></div>
</div>
<p>Example, rules file:</p>
<div class="highlight-python"><div class="highlight"><pre>S  NP  VP  010 1/2
VP_2   VB  NP  0,1 2/3
NP NN  0   1/4
</pre></div>
</div>
<p>lexicon file:</p>
<div class="highlight-python"><div class="highlight"><pre>is  VB  1/3
John    NN 1/2
rich    JJ 1/5
</pre></div>
</div>
</div>
<div class="section" id="backtransform">
<h3>backtransform<a class="headerlink" href="#backtransform" title="Permalink to this headline">¶</a></h3>
<p>Double-DOP grammars and other PTSGs employ a grammar in which internal nodes
are removed from fragments to obtain a more compact grammar. Fragments are
restored in derivations using a backtransform table with the original fragments
for each grammar rule.</p>
<p>The backtransform file contains one fragment per line, with the lines
corresponding to the lines of the grammar rule file. Frontier non-terminals
are indicated as <code class="docutils literal"><span class="pre">{0}</span></code>, <code class="docutils literal"><span class="pre">{1}</span></code>, etc.
The fragments which this backtransform is based on is also saved, with a
filename of the form <code class="docutils literal"><span class="pre">.fragments.gz</span></code>.
To view the grammar rules together with the corresponding fragments, issue the
following command:</p>
<div class="highlight-python"><div class="highlight"><pre>$ paste &lt;(zcat dop.rules.gz) &lt;(zcat dop.fragments.gz)
A       X       Y       01      1       (A (X 0) (Y 1)) 1
A_2     X       Z       0,1     1       (A_2 (X 0) (Z 2))       2
RIGHT   A_2     Y       010     1       (RIGHT (A_2 0 2) (Y 1)) 2
S       S}&lt;0&gt;   Z@z     01      2/5     (S (RIGHT (A_2 (X 0) (Z 2)) (Y 1)))     x y z   2
S       RIGHT   0       2/5     (S (RIGHT 0))   2
S       WRONG   0       1/5     (S (WRONG 0))   1
WRONG   A       Z       01      1       (WRONG (A 0) (Z 1))     1
S}&lt;0&gt;   X@x     Y@y     01      1
</pre></div>
</div>
</div>
<div class="section" id="alternate-weights">
<h3>alternate weights<a class="headerlink" href="#alternate-weights" title="Permalink to this headline">¶</a></h3>
<p>DOP grammars can contain multiple probability models. The alternate models are
stored in a NumPy array:</p>
<div class="highlight-python"><div class="highlight"><pre>$ python
&gt;&gt;&gt; import numpy
&gt;&gt;&gt; probs = numpy.load(&#39;dop.probs.npz&#39;)
&gt;&gt;&gt; probs.keys()
[&#39;default&#39;, &#39;shortest&#39;, &#39;bon&#39;, &#39;ewe&#39;]
&gt;&gt;&gt; probs[&#39;shortest&#39;][:10]
array([ 0.5,  0.5,  0.5,  0.5,  0.5,  0.5,  0.5,  0.5,  0.5,  0.5])
</pre></div>
</div>
<p>In this case, we see the model for shortest derivation parsing, where
every fragment is assigned a uniform weight of 0.5.</p>
</div>
</div>
<div class="section" id="miscellaneous">
<h2>Miscellaneous<a class="headerlink" href="#miscellaneous" title="Permalink to this headline">¶</a></h2>
<div class="section" id="head-assignment-rules">
<h3>head assignment rules<a class="headerlink" href="#head-assignment-rules" title="Permalink to this headline">¶</a></h3>
<p>This file specifies a set of heuristic rules to pick for every constituent
one of its children as being the head of the constituent, based on
syntactic categories.</p>
<p>The file is case insensitive. Lines starting with <code class="docutils literal"><span class="pre">%</span></code> are treated as comments
and ignored. Each line specifies a rule of the form:</p>
<div class="highlight-python"><div class="highlight"><pre>CAT direction child1 child2...
</pre></div>
</div>
<p>This rule specifies how a head child is assigned for a constituent labeled as <code class="docutils literal"><span class="pre">CAT</span></code>.
The second argument specifies whether the children of the constituent should
be considered starting from the left or from the right (corresponding to whether
a category is head-first head-final):</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">left:</th><td class="field-body">(or left-to-right) for each of the possible heads, try all children from left to right</td>
</tr>
<tr class="field-even field"><th class="field-name">right:</th><td class="field-body">(or right-to-left) for each of the possible heads, try all children from right to left</td>
</tr>
<tr class="field-odd field"><th class="field-name">leftdis:</th><td class="field-body">go from left to right and try each possible head.</td>
</tr>
<tr class="field-even field"><th class="field-name">rightdis:</th><td class="field-body">go from right to left and try each possible head.</td>
</tr>
<tr class="field-odd field"><th class="field-name">like:</th><td class="field-body">treat this label as if it were another label; e.g. &#8216;TOP like ROOT&#8217;.</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>There may be multiple rules for a category, for example if they go in opposite
directions. The rules are applied in the order as they appear in the file.</p>
<p>The list of children may be empty; in that case the leftmost (or rightmost, in
the second case) child will be chosen as head.
If the list of possible children is non-empty, the children of the constituents
are iterated over for each possible child, and the first matching child is
picked as the head.</p>
<p>See also: <a class="reference external" href="http://www.cs.columbia.edu/~mcollins/papers/heads">http://www.cs.columbia.edu/~mcollins/papers/heads</a></p>
</div>
<div class="section" id="evaluation-parameters">
<h3>evaluation parameters<a class="headerlink" href="#evaluation-parameters" title="Permalink to this headline">¶</a></h3>
<p>The format of this file is a superset of the parameters for EVALB,
cf. <a class="reference external" href="http://nlp.cs.nyu.edu/evalb/">http://nlp.cs.nyu.edu/evalb/</a></p>
<p>The parameter file should be encoded in UTF-8 and supports the following
options in addition to those supported by EVALB:</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">DELETE_ROOT_PRETERMS:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first">when enabled, preterminals directly under the root in
gold trees are ignored for scoring purposes.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">DISC_ONLY:</th><td class="field-body"><p class="first">only consider discontinuous constituents for F-scores.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">TED:</th><td class="field-body"><p class="first">when enabled, give tree-edit distance scores; disabled by
default as these are slow to compute.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">DEBUG:</th><td class="field-body"><table class="first docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">-1:</th><td class="field-body">only print summary table</td>
</tr>
<tr class="field-even field"><th class="field-name">0:</th><td class="field-body">additionally, print category / tag breakdowns (default)
(after application of cutoff length).</td>
</tr>
<tr class="field-odd field"><th class="field-name">1:</th><td class="field-body">give per-sentence results (&#8216;&#8211;verbose&#8217;)</td>
</tr>
<tr class="field-even field"><th class="field-name">2:</th><td class="field-body">give detailed information for each sentence (&#8216;&#8211;debug&#8217;)</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">MAX_ERROR:</th><td class="field-body"><p class="first last">this value is ignored, no errors are tolerated.
the parameter is accepted to support usage of unmodified
EVALB parameter files.</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h3><a href="index.html">Table Of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="intro.html#overview">Overview</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="ref.html">Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="discodop.html">Command line options</a></li>
<li class="toctree-l2"><a class="reference internal" href="params.html">Parser parameters</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">File formats</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html">API documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#indices-and-tables">Indices and tables</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cli/eval.html">eval</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli/fragments.html">fragments</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli/gen.html">gen</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli/grammar.html">grammar</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli/parser.html">parser</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli/runexp.html">runexp</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli/treedraw.html">treedraw</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli/treesearch.html">treesearch</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli/treetransforms.html">treetransforms</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="api.html" title="API documentation"
             >next</a></li>
        <li class="right" >
          <a href="params.html" title="Parser parameters"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Disco-DOP 0.5pre1 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="ref.html" >Reference</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2015, Andreas van Cranenburgh.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>